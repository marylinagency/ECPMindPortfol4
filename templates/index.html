{% extends "base.html" %}

{% block content %}
<div class="container-desktop py-8">
    {% if show_license %}
        <!-- License Activation Section -->
        <div class="min-h-screen flex items-center justify-center">
            <div class="max-w-md w-full">
                <div class="bg-white rounded-xl shadow-2xl p-8 glass-morphism fade-in">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4 pulse-glow">
                            <i data-feather="key" class="w-8 h-8 text-white"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-gray-900 mb-2">Activate BookGenPro</h2>
                        <p class="text-gray-600">Enter your license key to get started</p>
                    </div>
                    
                    <form method="POST" action="{{ url_for('activate_license') }}" data-validate>
                        <div class="space-y-6">
                            <div>
                                <label for="license_key" class="block text-sm font-medium text-gray-700 mb-2">License Key</label>
                                <input type="text" id="license_key" name="license_key" required
                                       class="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                       placeholder="Enter your license key">
                            </div>
                            
                            <div>
                                <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
                                <input type="email" id="email" name="email" required
                                       class="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                       placeholder="Enter your email address">
                            </div>
                            
                            <div class="bg-gray-50 border border-gray-200 rounded-lg p-3">
                                <div class="flex items-center text-sm text-gray-600">
                                    <i data-feather="shield" class="w-4 h-4 mr-2"></i>
                                    <span>Machine ID: <span class="font-mono text-xs">{{ config.machine_id }}</span></span>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">Automatically generated for this device</p>
                            </div>
                            
                            <button type="submit" 
                                    class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg hover:shadow-lg transform hover:scale-105 transition-all duration-200 font-medium">
                                <i data-feather="unlock" class="w-5 h-5 inline mr-2"></i>
                                Activate License
                            </button>
                        </div>
                    </form>
                    
                    <div class="mt-8 pt-6 border-t border-gray-200 text-center">
                        <p class="text-sm text-gray-600">
                            Need a license? Visit 
                            <a href="https://www.ecertifpro.com" target="_blank" class="text-blue-600 hover:text-blue-800 font-medium">ECertifPro.com</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    {% else %}
        <!-- New Modern Dashboard Layout -->
        <div class="min-h-screen">
            <!-- Top Header Section -->
            <div class="relative bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 py-16 mb-12">
                <div class="absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%239C92AC" fill-opacity="0.1"%3E%3Ccircle cx="30" cy="30" r="2"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')] opacity-20"></div>
                
                <div class="container-desktop relative z-10">
                    <div class="text-center">
                        <!-- Modern Logo -->
                        <div class="inline-flex items-center justify-center w-24 h-24 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl mb-6 shadow-lg">
                            <i data-feather="book-open" class="w-12 h-12 text-white"></i>
                        </div>
                        
                        <h1 class="text-6xl font-bold text-white mb-4">BookGenPro</h1>
                        <p class="text-xl text-gray-300 max-w-2xl mx-auto leading-relaxed">
                            Professional AI-powered book creation platform. Transform your ideas into complete books with advanced artificial intelligence.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Main Content Grid -->
            <div class="container-desktop">
                <div class="grid grid-cols-12 gap-8">
                    <!-- Left Sidebar - Generation Tools -->
                    <div class="col-span-4 space-y-6">
                        <!-- Quick Generation Card -->
                        <div class="bg-white/10 backdrop-blur-xl rounded-2xl border border-white/20 p-6">
                            <div class="flex items-center mb-4">
                                <div class="w-12 h-12 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl flex items-center justify-center mr-4">
                                    <i data-feather="zap" class="w-6 h-6 text-white"></i>
                                </div>
                                <h3 class="text-xl font-bold text-white">AI Generation</h3>
                            </div>
                            <p class="text-gray-300 mb-6">Create complete books instantly with AI</p>
                            <button onclick="showAIGenerationModal()" class="w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-3 px-4 rounded-xl font-semibold hover:shadow-lg transition-all duration-300">
                                Start Generating
                            </button>
                        </div>

                        <!-- Manual Creation Card -->
                        <div class="bg-white/10 backdrop-blur-xl rounded-2xl border border-white/20 p-6">
                            <div class="flex items-center mb-4">
                                <div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center mr-4">
                                    <i data-feather="edit-3" class="w-6 h-6 text-white"></i>
                                </div>
                                <h3 class="text-xl font-bold text-white">Manual Creation</h3>
                            </div>
                            <p class="text-gray-300 mb-6">Full control over your book content</p>
                            <button onclick="showManualCreationModal()" class="w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white py-3 px-4 rounded-xl font-semibold hover:shadow-lg transition-all duration-300">
                                Create Manually
                            </button>
                        </div>

                        <!-- Quick Templates -->
                        <div class="bg-white/10 backdrop-blur-xl rounded-2xl border border-white/20 p-6">
                            <div class="flex items-center mb-4">
                                <div class="w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl flex items-center justify-center mr-4">
                                    <i data-feather="layers" class="w-6 h-6 text-white"></i>
                                </div>
                                <h3 class="text-xl font-bold text-white">Quick Templates</h3>
                            </div>
                            <div class="space-y-3">
                                <button class="w-full text-left bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg p-3 text-gray-300 hover:text-white transition-all duration-200">
                                    <div class="font-medium">Business Guide</div>
                                    <div class="text-sm opacity-75">Professional business book template</div>
                                </button>
                                <button class="w-full text-left bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg p-3 text-gray-300 hover:text-white transition-all duration-200">
                                    <div class="font-medium">Self-Help Book</div>
                                    <div class="text-sm opacity-75">Personal development guide</div>
                                </button>
                                <button class="w-full text-left bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg p-3 text-gray-300 hover:text-white transition-all duration-200">
                                    <div class="font-medium">Technical Manual</div>
                                    <div class="text-sm opacity-75">Step-by-step instructions</div>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Center and Right - Completed Projects Gallery -->
                    <div class="col-span-8">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-3xl font-bold text-white">Your Completed Books</h2>
                            <div class="text-gray-400">
                                <span id="project-count">0</span> books created
                            </div>
                        </div>

                        <!-- Projects Grid -->
                        <div id="completed-projects-grid" class="grid grid-cols-3 gap-6">
                            <!-- Projects will be dynamically loaded here -->
                        </div>

                        <!-- Empty State -->
                        <div id="empty-projects-state" class="text-center py-20">
                            <div class="w-24 h-24 bg-gray-600 rounded-full flex items-center justify-center mx-auto mb-6">
                                <i data-feather="book" class="w-12 h-12 text-gray-400"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-400 mb-2">No Books Yet</h3>
                            <p class="text-gray-500 mb-6">Start creating your first book using AI generation or manual creation</p>
                            <button onclick="showAIGenerationModal()" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-3 rounded-xl font-semibold hover:shadow-lg transition-all duration-300">
                                Create Your First Book
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Centered AI Book Generation Card -->
            <div class="flex justify-center">
                <div class="ai-book-card p-12 max-w-4xl w-full"
                     onmouseenter="createSparkles(this)"
                     onmouseleave="removeSparkles(this)">
                    
                    <div class="text-center mb-8">
                        <div class="w-20 h-20 bg-gradient-to-br from-orange-500 to-red-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-2xl">
                            <i data-feather="zap" class="w-10 h-10 text-white"></i>
                        </div>
                        <h2 class="text-4xl font-bold text-white mb-4">AI Book Generation</h2>
                        <p class="text-lg text-gray-200 max-w-2xl mx-auto">
                            Let our advanced AI create a complete book for you. Just provide a topic and watch magic happen.
                        </p>
                    </div>
                    
                    <form method="POST" action="{{ url_for('create_ai_book') }}" class="space-y-6" id="generate-book-form">
                        <div class="mb-8">
                            <label for="gen_book_title" class="block text-lg font-semibold text-white mb-4 text-center">Book Title</label>
                            <input type="text" id="gen_book_title" name="book_title" required
                                   class="w-full px-6 py-4 bg-white/90 backdrop-blur border-0 rounded-2xl text-lg focus:ring-4 focus:ring-orange-300 focus:outline-none shadow-xl transition-all duration-300"
                                   placeholder="Enter your book title (AI will enhance it)...">
                        </div>
                        
                        <div class="mb-8">
                            <label for="gen_topic" class="block text-lg font-semibold text-white mb-4 text-center">What's Your Book About?</label>
                            <textarea id="gen_topic" name="topic" rows="4" required
                                      class="w-full px-6 py-4 bg-white/90 backdrop-blur border-0 rounded-2xl text-lg focus:ring-4 focus:ring-orange-300 focus:outline-none shadow-xl transition-all duration-300"
                                      placeholder="Describe your book topic, genre, target audience, and key themes you want covered..."></textarea>
                        </div>
                        
                        <div class="mb-8">
                            <label for="gen_author_bio" class="block text-lg font-semibold text-white mb-4 text-center">Author Bio</label>
                            <textarea id="gen_author_bio" name="author_bio" rows="3"
                                      class="w-full px-6 py-4 bg-white/90 backdrop-blur border-0 rounded-2xl text-lg focus:ring-4 focus:ring-orange-300 focus:outline-none shadow-xl transition-all duration-300"
                                      placeholder="Tell us about yourself as the author - your background, expertise, credentials, and what makes you qualified to write this book..."></textarea>
                        </div>
                        

                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <div>
                                <label for="gen_language" class="block text-sm font-semibold text-white mb-3">Language</label>
                                <select id="gen_language" name="language" class="w-full px-4 py-3 bg-white/90 backdrop-blur border-0 rounded-xl focus:ring-4 focus:ring-orange-300 focus:outline-none shadow-lg transition-all duration-300">
                                    <option value="English">English</option>
                                    <option value="Spanish">Spanish</option>
                                    <option value="French">French</option>
                                    <option value="German">German</option>
                                    <option value="Italian">Italian</option>
                                    <option value="Portuguese">Portuguese</option>
                                    <option value="Arabic">Arabic</option>
                                    <option value="Chinese">Chinese</option>
                                    <option value="Japanese">Japanese</option>
                                </select>
                            </div>
                            
                            <div>
                                <label for="gen_chapters" class="block text-sm font-semibold text-white mb-3">Chapters</label>
                                <input type="number" id="gen_chapters" name="chapters" value="8" min="3" max="25"
                                       class="w-full px-4 py-3 bg-white/90 backdrop-blur border-0 rounded-xl focus:ring-4 focus:ring-orange-300 focus:outline-none shadow-lg transition-all duration-300">
                            </div>
                            
                            <div>
                                <label for="gen_style" class="block text-sm font-semibold text-white mb-3">Writing Style</label>
                                <select id="gen_style" name="style" class="w-full px-4 py-3 bg-white/90 backdrop-blur border-0 rounded-xl focus:ring-4 focus:ring-orange-300 focus:outline-none shadow-lg transition-all duration-300">
                                    <option value="professional">Professional</option>
                                    <option value="casual">Casual</option>
                                    <option value="academic">Academic</option>
                                    <option value="creative">Creative</option>
                                    <option value="technical">Technical</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- AI Provider Status -->
                        <div class="bg-white/20 backdrop-blur border border-white/30 rounded-2xl p-6 mb-8">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex items-start space-x-4">
                                    <div class="w-8 h-8 bg-white/30 rounded-full flex items-center justify-center">
                                        <i data-feather="cpu" class="w-4 h-4 text-white"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-white mb-3">AI Provider Status</h4>
                                        <div id="ai-provider-status" class="space-y-2">
                                            {% if config.ai_provider == 'gemini' %}
                                                {% if config.gemini_api_key %}
                                                    <div class="flex items-center text-green-300">
                                                        <div class="w-2 h-2 bg-green-400 rounded-full mr-3 animate-pulse"></div>
                                                        <span class="text-sm font-medium">Google Gemini</span>
                                                        <span class="ml-2 text-xs bg-green-400/20 text-green-300 px-2 py-1 rounded-full">{{ config.gemini_model or 'gemini-1.5-flash' }}</span>
                                                    </div>
                                                {% else %}
                                                    <div class="flex items-center text-red-300">
                                                        <div class="w-2 h-2 bg-red-400 rounded-full mr-3"></div>
                                                        <span class="text-sm">Google Gemini - Not Configured</span>
                                                    </div>
                                                {% endif %}
                                            {% else %}
                                                {% if config.openrouter_api_key %}
                                                    <div class="flex items-center text-green-300">
                                                        <div class="w-2 h-2 bg-green-400 rounded-full mr-3 animate-pulse"></div>
                                                        <span class="text-sm font-medium">OpenRouter</span>
                                                        <span class="ml-2 text-xs bg-green-400/20 text-green-300 px-2 py-1 rounded-full">{{ config.selected_model or 'auto' }}</span>
                                                    </div>
                                                {% else %}
                                                    <div class="flex items-center text-red-300">
                                                        <div class="w-2 h-2 bg-red-400 rounded-full mr-3"></div>
                                                        <span class="text-sm">OpenRouter - Not Configured</span>
                                                    </div>
                                                {% endif %}
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                                <a href="{{ url_for('settings') }}" 
                                   class="text-xs text-white/70 hover:text-white transition-colors bg-white/10 px-3 py-2 rounded-lg hover:bg-white/20">
                                    <i data-feather="settings" class="w-3 h-3 inline mr-1"></i>
                                    Configure
                                </a>
                            </div>
                            
                            <div>
                                <h5 class="text-sm font-medium text-white mb-2">How AI Generation Works</h5>
                                <ul class="text-xs text-gray-200 space-y-1">
                                    <li class="flex items-center"><span class="w-1.5 h-1.5 bg-orange-400 rounded-full mr-2"></span>AI analyzes your topic and creates chapter outlines</li>
                                    <li class="flex items-center"><span class="w-1.5 h-1.5 bg-orange-400 rounded-full mr-2"></span>Content is generated chapter by chapter automatically</li>
                                    <li class="flex items-center"><span class="w-1.5 h-1.5 bg-orange-400 rounded-full mr-2"></span>Monitor progress and edit content in real-time</li>
                                    <li class="flex items-center"><span class="w-1.5 h-1.5 bg-orange-400 rounded-full mr-2"></span>Typically takes 2-5 minutes per chapter</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="flex flex-col sm:flex-row gap-6">
                            <button type="submit" name="action" value="generate_titles"
                                    class="modern-button bg-clear-purple text-white flex-1 flex items-center justify-center space-x-3 text-lg py-4 rounded-xl">
                                <i data-feather="list" class="w-6 h-6"></i>
                                <span>Generate Chapter Titles</span>
                            </button>
                            
                            <button type="submit" name="action" value="generate_full"
                                    class="modern-button bg-clear-red text-white flex-1 flex items-center justify-center space-x-3 text-lg py-4 rounded-xl pulse-glow">
                                <i data-feather="book" class="w-6 h-6"></i>
                                <span>Generate Full Book</span>
                            </button>
                        </div>
                    </form>
                    
                    <!-- Generation Status -->
                    <div id="generation-status" class="mt-8 hidden">
                        <div class="bg-white/30 backdrop-blur border border-white/40 rounded-2xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="font-semibold text-white">Generation Progress</h4>
                                <span id="progress-text" class="text-sm text-gray-200">Initializing...</span>
                            </div>
                            
                            <div class="w-full bg-white/20 rounded-full h-3 mb-4">
                                <div id="progress-bar" class="bg-gradient-to-r from-orange-400 to-red-500 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                            
                            <div id="current-chapter" class="text-sm text-gray-200"></div>
                        </div>
                        
                        <div class="mt-6 flex justify-center">
                            <button onclick="stopGeneration()" class="bg-red-600/80 backdrop-blur text-white px-6 py-3 rounded-xl hover:bg-red-700 transition-all duration-300 border border-red-500/50">
                                <i data-feather="stop-circle" class="w-4 h-4 inline mr-2"></i>
                                Stop Generation
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Writing Mood Tracker Section -->
            <div class="mt-16 mb-8">
                <div class="glass-card p-8 slide-in-up animate-delay-700">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-gradient-to-br from-pink-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-2xl">
                            <i data-feather="heart" class="w-8 h-8 text-white"></i>
                        </div>
                        <h3 class="text-3xl font-bold text-white mb-2">Writing Mood Tracker</h3>
                        <p class="text-lg text-gray-200">How are you feeling about your writing today?</p>
                    </div>
                    
                    <!-- Mood Selection -->
                    <div class="grid grid-cols-5 gap-4 mb-6">
                        <div class="mood-emoji" data-mood="excited" onclick="selectMood('excited', '🤩', 'Excited')">
                            <span class="text-3xl">🤩</span>
                            <span class="text-xs text-gray-600 font-medium">Excited</span>
                        </div>
                        <div class="mood-emoji" data-mood="focused" onclick="selectMood('focused', '🎯', 'Focused')">
                            <span class="text-3xl">🎯</span>
                            <span class="text-xs text-gray-600 font-medium">Focused</span>
                        </div>
                        <div class="mood-emoji" data-mood="creative" onclick="selectMood('creative', '🎨', 'Creative')">
                            <span class="text-3xl">🎨</span>
                            <span class="text-xs text-gray-600 font-medium">Creative</span>
                        </div>
                        <div class="mood-emoji" data-mood="tired" onclick="selectMood('tired', '😴', 'Tired')">
                            <span class="text-3xl">😴</span>
                            <span class="text-xs text-gray-600 font-medium">Tired</span>
                        </div>
                        <div class="mood-emoji" data-mood="blocked" onclick="selectMood('blocked', '😵‍💫', 'Blocked')">
                            <span class="text-3xl">😵‍💫</span>
                            <span class="text-xs text-gray-600 font-medium">Blocked</span>
                        </div>
                    </div>
                    
                    <!-- Mood Note -->
                    <div class="mb-6">
                        <textarea id="mood-note" 
                                  class="w-full px-4 py-3 bg-white/90 backdrop-blur border-0 rounded-xl text-sm focus:ring-2 focus:ring-pink-300 focus:outline-none shadow-lg resize-none"
                                  rows="3" 
                                  placeholder="Add a note about your writing mood today (optional)..."></textarea>
                    </div>
                    
                    <!-- Save Button -->
                    <div class="text-center mb-6">
                        <button id="save-mood-btn" 
                                onclick="saveMood()" 
                                class="bg-gradient-to-r from-pink-500 to-purple-600 text-white px-8 py-3 rounded-xl hover:shadow-lg transform hover:scale-105 transition-all duration-300 font-medium disabled:opacity-50 disabled:cursor-not-allowed">
                            <i data-feather="heart" class="w-4 h-4 inline mr-2"></i>
                            Save My Mood
                        </button>
                    </div>
                    
                    <!-- Mood History -->
                    <div>
                        <h4 class="text-lg font-semibold text-white mb-4 text-center">Your Writing Journey</h4>
                        <div id="mood-history" class="flex gap-3 overflow-x-auto pb-2">
                            <!-- History will be populated here -->
                            <div class="flex-shrink-0 text-center text-gray-300">
                                <div class="w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center mb-2">
                                    <i data-feather="calendar" class="w-6 h-6"></i>
                                </div>
                                <span class="text-xs">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Secondary Actions Section -->
            <div class="mt-8 grid md:grid-cols-2 gap-8">
                <!-- Quick Generation Templates with Modern Effects -->
                <div class="glass-card p-8 slide-in-left animate-delay-500">
                    <h3 class="text-2xl font-bold text-white mb-6 text-center">Quick Templates</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <button class="card-interactive bg-white/20 backdrop-blur border border-white/30 rounded-xl p-4 text-white" onclick="fillTemplate('business')">
                            <i data-feather="briefcase" class="w-6 h-6 mx-auto mb-2"></i>
                            <div class="text-sm font-medium">Business</div>
                        </button>
                        
                        <button class="card-interactive bg-white/20 backdrop-blur border border-white/30 rounded-xl p-4 text-white" onclick="fillTemplate('tech')">
                            <i data-feather="code" class="w-6 h-6 mx-auto mb-2"></i>
                            <div class="text-sm font-medium">Tech</div>
                        </button>
                        
                        <button class="card-interactive bg-white/20 backdrop-blur border border-white/30 rounded-xl p-4 text-white" onclick="fillTemplate('fiction')">
                            <i data-feather="feather" class="w-6 h-6 mx-auto mb-2"></i>
                            <div class="text-sm font-medium">Fiction</div>
                        </button>
                        
                        <button class="card-interactive bg-white/20 backdrop-blur border border-white/30 rounded-xl p-4 text-white" onclick="fillTemplate('educational')">
                            <i data-feather="book-open" class="w-6 h-6 mx-auto mb-2"></i>
                            <div class="text-sm font-medium">Education</div>
                        </button>
                    </div>
                </div>
                
                <!-- Manual Project Creation with Modern Effects -->
                <div class="glass-card p-8 slide-in-right animate-delay-600">
                    <h3 class="text-2xl font-bold text-white mb-6 text-center">Manual Creation</h3>
                    <p class="text-gray-300 text-center mb-4">Want more control? Create a project manually and add your own chapters.</p>
                    
                    <!-- Toggle Form -->
                    <div id="manual-form-container" class="hidden">
                        <form method="POST" action="{{ url_for('create_manual_book') }}" class="space-y-4">
                            <div>
                                <label for="manual_topic" class="block text-sm font-medium text-white mb-2">Book Topic</label>
                                <textarea id="manual_topic" name="topic" rows="3" required
                                          class="w-full px-3 py-3 bg-white/90 backdrop-blur border-0 rounded-lg text-sm focus:ring-2 focus:ring-blue-300 focus:outline-none shadow-lg"
                                          placeholder="Describe your book topic and what you want to write about..."></textarea>
                            </div>
                            
                            <div>
                                <label for="manual_author_bio" class="block text-sm font-medium text-white mb-2">Author Bio (Optional)</label>
                                <textarea id="manual_author_bio" name="author_bio" rows="2"
                                          class="w-full px-3 py-3 bg-white/90 backdrop-blur border-0 rounded-lg text-sm focus:ring-2 focus:ring-blue-300 focus:outline-none shadow-lg"
                                          placeholder="Tell readers about yourself as the author..."></textarea>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label for="manual_language" class="block text-sm font-medium text-white mb-2">Language</label>
                                    <select id="manual_language" name="language" class="w-full px-3 py-3 bg-white/90 backdrop-blur border-0 rounded-lg text-sm focus:ring-2 focus:ring-blue-300 focus:outline-none shadow-lg">
                                        <option value="English">English</option>
                                        <option value="Spanish">Spanish</option>
                                        <option value="French">French</option>
                                        <option value="German">German</option>
                                        <option value="Italian">Italian</option>
                                        <option value="Portuguese">Portuguese</option>
                                        <option value="Arabic">Arabic</option>
                                        <option value="Chinese">Chinese</option>
                                        <option value="Japanese">Japanese</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label for="manual_chapters" class="block text-sm font-medium text-white mb-2">Chapters</label>
                                    <input type="number" id="manual_chapters" name="chapters" value="8" min="3" max="25"
                                           class="w-full px-3 py-3 bg-white/90 backdrop-blur border-0 rounded-lg text-sm focus:ring-2 focus:ring-blue-300 focus:outline-none shadow-lg">
                                </div>
                            </div>
                            
                            <div>
                                <label for="manual_style" class="block text-sm font-medium text-white mb-2">Writing Style</label>
                                <select id="manual_style" name="style" class="w-full px-3 py-3 bg-white/90 backdrop-blur border-0 rounded-lg text-sm focus:ring-2 focus:ring-blue-300 focus:outline-none shadow-lg">
                                    <option value="professional">Professional</option>
                                    <option value="casual">Casual</option>
                                    <option value="academic">Academic</option>
                                    <option value="creative">Creative</option>
                                    <option value="technical">Technical</option>
                                </select>
                            </div>
                            

                            
                            <div class="flex space-x-3 pt-2">
                                <button type="submit" class="flex-1 bg-blue-600/80 backdrop-blur text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-all duration-300 border border-blue-500/50">
                                    <i data-feather="book" class="w-4 h-4 inline mr-2"></i>
                                    Create Manual Project
                                </button>
                                <button type="button" onclick="hideManualForm()" class="px-4 py-3 bg-red-600/80 backdrop-blur text-white rounded-lg hover:bg-red-700 transition-all duration-300 border border-red-500/50">
                                    <i data-feather="x" class="w-4 h-4"></i>
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Show/Hide Button -->
                    <div id="manual-show-button" class="text-center">
                        <button onclick="showManualForm()" 
                               class="modern-button inline-flex items-center justify-center space-x-3 bg-white/20 backdrop-blur text-white px-8 py-4 rounded-xl border border-white/30">
                            <i data-feather="edit" class="w-5 h-5"></i>
                            <span>Create Manual Project</span>
                        </button>
                    </div>
                </div>
            </div>

            
            <!-- Recent Projects with Modern Effects -->
            {% if recent_projects %}
            <div class="mb-12 slide-in-up animate-delay-800">
                <h2 class="text-3xl font-bold text-white mb-8 text-center">Recent Projects</h2>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    {% for project in recent_projects %}
                    <div class="glass-card overflow-hidden cursor-pointer transform hover:scale-105 transition-all duration-300 hover:shadow-2xl" onclick="location.href='{{ url_for('project_view', project_id=project.id) }}'">
                        {% if project.cover_image %}
                            <div class="h-48 bg-cover bg-center relative overflow-hidden" 
                                 style="background-image: url('{{ url_for('static', filename='uploads/' + project.cover_image) }}');">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"></div>
                                <div class="absolute bottom-0 left-0 right-0 p-4">
                                    <h3 class="text-xl font-bold text-white mb-1 drop-shadow-lg">{{ project.name }}</h3>
                                </div>
                            </div>
                        {% else %}
                            <div class="h-48 bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center">
                                <div class="text-center text-white">
                                    <i data-feather="book" class="w-16 h-16 mx-auto mb-2 opacity-80"></i>
                                    <h3 class="text-xl font-bold">{{ project.name }}</h3>
                                </div>
                            </div>
                        {% endif %}
                        
                        <div class="p-6">
                            {% if not project.cover_image %}
                            <h3 class="text-xl font-bold text-white mb-2">{{ project.name }}</h3>
                            {% endif %}
                            <p class="text-gray-200 mb-4 line-clamp-2">{{ project.topic or project.description[:100] + '...' if project.description else 'No description available' }}</p>
                            
                            <div class="flex items-center justify-between text-sm text-gray-300 mb-4">
                                <span class="flex items-center">
                                    <i data-feather="file-text" class="w-4 h-4 mr-1"></i>
                                    {{ project.chapters|length }} chapters
                                </span>
                                <span class="flex items-center">
                                    <i data-feather="globe" class="w-4 h-4 mr-1"></i>
                                    {{ project.language }}
                                </span>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <span class="text-xs text-gray-400">
                                    {% if project.generation_status == 'completed' %}
                                        <span class="text-green-400">✓ Complete</span>
                                    {% elif project.generation_status == 'generating' %}
                                        <span class="text-yellow-400">⟳ Generating</span>
                                    {% else %}
                                        <span class="text-gray-400">○ Draft</span>
                                    {% endif %}
                                </span>
                                <div class="modern-button bg-clear-blue text-white px-4 py-2 rounded-lg text-sm">
                                    <i data-feather="arrow-right" class="w-4 h-4 inline mr-2"></i>
                                    Open Project
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            
            <!-- About Section -->
            <div class="bg-white rounded-xl shadow-lg p-8 mb-12 card-interactive scroll-reveal">
                <div class="text-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-6 text-shimmer">About BookGenPro</h2>
                    <div class="max-w-4xl mx-auto">
                        <p class="text-lg text-gray-600 mb-8">
                            BookGenPro is an innovative AI-powered book generation tool that transforms your ideas into 
                            complete, professionally structured books. Using advanced AI technology through OpenRouter API, 
                            it automatically generates compelling chapter titles and rich content based on your book's theme.
                        </p>
                        
                        <div class="grid md:grid-cols-3 gap-8 mb-8">
                            <div class="text-center">
                                <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <i data-feather="zap" class="w-8 h-8 text-white"></i>
                                </div>
                                <h3 class="text-xl font-semibold text-gray-900 mb-2">AI-Powered</h3>
                                <p class="text-gray-600">Advanced AI generates chapter titles and content automatically</p>
                            </div>
                            
                            <div class="text-center">
                                <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <i data-feather="globe" class="w-8 h-8 text-white"></i>
                                </div>
                                <h3 class="text-xl font-semibold text-gray-900 mb-2">Multi-Language</h3>
                                <p class="text-gray-600">Generate books in multiple languages with native fluency</p>
                            </div>
                            
                            <div class="text-center">
                                <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <i data-feather="download" class="w-8 h-8 text-white"></i>
                                </div>
                                <h3 class="text-xl font-semibold text-gray-900 mb-2">Professional Export</h3>
                                <p class="text-gray-600">Export to PDF and HTML with beautiful, professional styling</p>
                            </div>
                        </div>
                        
                        <div class="border-t border-gray-200 pt-8">
                            <p class="text-gray-600 mb-4">
                                Developed with passion by the ECPMind team, BookGenPro represents the cutting edge of 
                                AI-assisted content creation, making professional book writing accessible to everyone.
                            </p>
                            <a href="https://www.ecertifpro.com" target="_blank" 
                               class="inline-flex items-center text-blue-600 hover:text-blue-800 font-semibold">
                                <i data-feather="external-link" class="w-4 h-4 mr-2"></i>
                                Learn more at ECertifPro.com
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Floating Action Button -->
        <button class="fab tooltip-dynamic" data-tooltip="Quick actions" onclick="showQuickActions()">
            <i data-feather="plus" class="w-6 h-6"></i>
        </button>
        
        <!-- Dynamic loading overlay -->
        <div id="loading-overlay" class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm hidden items-center justify-center z-50">
            <div class="bg-white rounded-lg p-8 text-center">
                <div class="animate-spin w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"></div>
                <p class="text-gray-700 font-medium">Processing your request...</p>
            </div>
        </div>
    {% endif %}
</div>

<!-- Real-time notifications container -->
<div id="notifications-container" class="fixed top-4 right-4 z-50 space-y-2"></div>

<!-- Dynamic status bar -->
<div id="status-bar" class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2 text-sm text-gray-600 hidden">
    <div class="flex items-center justify-between">
        <span id="status-text">Ready</span>
        <div class="flex items-center space-x-4">
            <span id="connection-status" class="status-indicator status-completed">Online</span>
            <button onclick="toggleStatusBar()" class="text-gray-400 hover:text-gray-600">
                <i data-feather="x" class="w-4 h-4"></i>
            </button>
        </div>
    </div>
</div>
{% endblock %}
